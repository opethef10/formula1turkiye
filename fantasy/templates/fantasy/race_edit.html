{% extends 'base.html' %}
{% load static form_tags widget_tweaks %}

{% block title %}Yeni Tahmin | Formula 1 Türkiye{% endblock %}

{% block breadcrumb %}
    <li class="breadcrumb-item"><a href="{% url 'home' %}">Ana Sayfa</a></li>

{% endblock %}


{% block content %}
    {{ form.errors }}
    <form class="form form-horizontal" method="post" novalidate>
        {% csrf_token %}
        {{ formset.management_form }}
        <div class="form-group row">
            <div class="col-lg-2">Driver</div>
            <div class="col-lg-1">Price</div>
            <div class="col-lg-1">Discount</div>
            <div class="col-lg-1">Qualy</div>
            <div class="col-lg-1">Grid sprint</div>
            <div class="col-lg-1">Sprint</div>
            <div class="col-lg-1">Grid</div>
            <div class="col-lg-1">Result</div>
            <div class="col-lg-1">Fastest Lap</div>
        </div>
        {% for form in formset %}
            {% if form.non_field_errors %}
                <div class="alert alert-danger" role="alert">
                    {% for error in form.non_field_errors %}
                        <p{% if forloop.last %} class="mb-0"{% endif %}>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
            <div class="form-group row">
                {% for field in form %}
                    {% if forloop.first %}
                        <div class="col-lg-2">
                            {#                        {% render_field field %}#}
                            {% render_field field disabled="True" %}
                        </div>
                        {% elif forloop.counter == 3 %}
                        <div class="col-lg-1">
                            {#                        {% render_field field %}#}
                            {% render_field field %}
                        </div>
                    {% else %}
                        <div class="col-lg-1">
                            {#                {{ field.label_tag}}#}
                            {#                    {{ field }}#}
                            {% render_field field style="width: 60px" %}
                        </div>
                    {% endif %}
                    {% for error in field.errors %}
                        <div class="invalid-feedback">
                            {{ error }}
                        </div>
                    {% endfor %}
                {% endfor %}
            </div>
            {#            {{form.as_table}}<br><br>#}
        {% endfor %}
        <button type="submit" class="btn btn-success">Gönder</button>
        <button type="reset" class="btn btn-primary ml-2" id="deselect">Değişiklikleri Geri Al</button>
    </form>
{% endblock %}

{% block javascript %}
    <script>
        jQuery(function ($) {
            $('form').bind('submit', function () {
                $(this).find(':input').prop('disabled', false);
            });
        });
    </script>
{% endblock %}
