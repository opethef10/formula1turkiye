{% extends 'base.html' %}
{% load static %}

{% block title %}Fantasy {{ view.championship }}{% endblock %}

{% block breadcrumb %}
    <li class="breadcrumb-item"><a href="{% url 'home' %}">Ana Sayfa</a></li>
    <li class="breadcrumb-item"><a href="{% url 'formula:season_list' view.championship.series %}">{{ view.championship.get_series_display }}</a></li>
    <li class="breadcrumb-item">{{ view.championship.year }}</li>
{% endblock %}

{% block stylesheet %}
    <link rel="stylesheet" href="{% static 'flags/sprite-hq.css' %}">
{% endblock %}

{% block content %}
  <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
    {% if view.championship.is_fantasy %}
      <div class="btn-group mr-4" role="group" aria-label="Menu Group Fantasy">
        <a href="{% url 'formula:driver_stats' view.championship.series view.championship.year %}"
           class="btn btn-outline-primary">Sürücü İstatistikleri</a>
        <a href="{% url 'formula:team_list' view.championship.series view.championship.year %}"
           class="btn btn-outline-primary">Fantasy Lig Genel Klasman</a>
        {% if race_team_count > 1 %}
          <a href="{% url 'formula:edit_team_form' view.championship.series view.championship.year %}"
             class="btn btn-outline-primary">Alım Satım</a>
        {% elif race_team_count == 0 %}
          <a href="{% url 'formula:new_team_form' view.championship.series view.championship.year %}"
             class="btn btn-outline-primary">Yeni Takım Kur</a>
        {% elif race_team_count == 1 %}
          <a href="{% url 'formula:edit_team_form' view.championship.series view.championship.year %}"
             class="btn btn-outline-primary">Takımı Düzenle</a>
        {% else %}
          <a href="{% url 'formula:new_team_form' view.championship.series view.championship.year %}"
             class="btn btn-outline-primary">Yeni Takım / Alım Satım (Giriş Yapınız)</a>
        {% endif %}
      </div>
    {% endif %}

    {% if view.championship.is_tahmin %}
      <div class="btn-group mr-4" role="group" aria-label="Menu Group Tahmin">
        <a href="{% url 'formula:tahmin:team_list' view.championship.series view.championship.year %}"
           class="btn btn-outline-primary">Tahmin Ligi Genel Klasman</a>
        <a href="{% url 'formula:tahmin:new_team_form' view.championship.series view.championship.year %}"
           class="btn btn-outline-primary">Yeni Tahmin</a>
      </div>
    {% endif %}
  </div>

    <h3 class="my-3">Yarışlar</h3>
    <table class="table table-responsive table-hover table-sm table-striped">
        <thead class="thead-inverse">
        <tr>
            <th>Ayak</th>
            <th>Ad / Pist</th>
            <th>1. Antrenman</th>
            <th>2. Antrenman</th>
            <th>3. Antrenman</th>
            <th>Sıralama</th>
            <th>Sprint Shootout</th>
            <th>Sprint</th>
            <th>Yarış</th>
            <th>Lig Sonuçları</th>
        </tr>
        </thead>
        <tbody>
        {% for race in race_list %}
            <tr class="align-middle">
                <td>{{ race.round }}</td>
                <td><i class="{{ race.country.flag_css }}"></i> <a href="{{ race.get_absolute_url }}">{{ race.name }}</a> <br> <a href="{{ race.circuit.get_absolute_url }}">{{ race.circuit}}</a></td>
                <td>{{ race.fp1_datetime|date:"j F"}} <br> {{ race.fp1_datetime|time:"TIME_FORMAT" }}</td>
                <td>{{ race.fp2_datetime|date:"j F"}} <br> {{ race.fp2_datetime|time:"TIME_FORMAT" }}</td>
                <td>{{ race.fp3_datetime|date:"j F"}} <br> {{ race.fp3_datetime|time:"TIME_FORMAT" }}</td>
                <td>{{ race.quali_datetime|date:"j F"}} <br> {{ race.quali_datetime|time:"TIME_FORMAT" }}</td>
                <td>{{ race.sprint_shootout_datetime|date:"j F"}} <br> {{ race.sprint_shootout_datetime|time:"TIME_FORMAT" }}</td>
                <td>{{ race.sprint_datetime|date:"j F"}} <br> {{ race.sprint_datetime|time:"TIME_FORMAT" }}</td>
                <td>{{ race.datetime|date:"j F" }} <br> {{ race.datetime|date:"TIME_FORMAT" }}</td>
                <td>
                  {% if view.championship.is_fantasy %}
                  <a href="{{ race.get_absolute_url }}"><i class="fa-solid fa-hand-holding-dollar"></i> Fantasy</a> <br>
                  {% endif %}
                  {% if view.championship.is_tahmin %}
                    <a href="{{ race.get_tahmin_url }}"><i class="fa-solid fa-list-ol"></i> Tahmin</a>
                  {% endif %}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}
